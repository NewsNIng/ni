/*! ni v0.0.1 by NewsNing */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(2),u=r(i),a=n(3),o=r(a),l=n(4),c=r(l),s=n(5),f=r(s),h=n(6),v=n(7),p=r(v),y=Object.create(null);y.ready=h.ready,y.plusReady=h.plusReady,y.broadcast=new u.default,y.gallery=c.default,y.OAuth=o.default,y.Share=p.default,y.Cache=f.default,console.log(p.default),"undefined"!=typeof window&&(window.ni=y)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=new WeakMap,u=new WeakMap,a=(new WeakMap,function(){function e(){n(this,e),this.newState=!0}return r(e,[{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.self,i=void 0!==r&&r,u=n.ids,a=void 0===u?[]:u;if(window.plus){var o=this._getViews();if(a.length>0){o=[];var l=!0,c=!1,s=void 0;try{for(var f,h=a[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var v=f.value,p=plus.webview.getWebviewById(v);p&&o.push(p)}}catch(e){c=!0,s=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw s}}}var y=!0,d=!1,g=void 0;try{for(var _,w=o[Symbol.iterator]();!(y=(_=w.next()).done);y=!0){var b=_.value;(b.id!=this._getIndexID()||i)&&b.evalJS("document.dispatchEvent(new CustomEvent('"+e+"', {\n                detail:JSON.parse('"+JSON.stringify(t)+"'),\n                bubbles: true,\n                cancelable: true\n            }));")}}catch(e){d=!0,g=e}finally{try{!y&&w.return&&w.return()}finally{if(d)throw g}}}}},{key:"listen",value:function(e,t){return document.addEventListener(e,t),this}},{key:"_getViews",value:function(){return i.get(this)&&!this.newState||i.set(this,plus.webview.all()),i.get(this)}},{key:"_getIndexID",value:function(){return u.get(this)||u.set(this,plus.webview.currentWebview().id),u.get(this)}},{key:"newState",get:function(){return!!+window.localStorage.getItem("_newsning_broadcast_hasnew_")},set:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return window.localStorage.getItem("_newsning_broadcast_hasnew_",+e)}}]),e}());t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;n(this,e),this.auths=null,this.type=t,this.OAuthCallBack=function(){return r.apply(i,arguments)},this.start()}return r(e,[{key:"start",value:function(){var e=this;this.getService(this.type,function(t){e.getOAuthInfo(t,function(){e.OAuthCallBack(null,t)})})}},{key:"getOAuthInfo",value:function(e,t){var n=this,r=arguments;this._OAuthLogin(e,function(){e.getUserInfo(function(){t&&t(e)},function(){return n.OAuthCallBack.apply(null,r)})})}},{key:"_OAuthLogin",value:function(e,t){var n=this,r=arguments;e.authResult?t&&t():e.login(function(){t&&t()},function(){return n.OAuthCallBack.apply(null,r)})}},{key:"_getService",value:function(e,t){for(var n in this.auths)if(e===this.auths[n].id)return t&&t(this.auths[n]),this.auths[n]}},{key:"getService",value:function(e,t){var n=this,r=arguments;return null===this.auths?this._getHtml5PlusServices(function(i,u){return i?n.OAuthCallBack.apply(null,r):(n.auths=u,void n._getService(e,t))}):void this._getService(e,t)}},{key:"_getHtml5PlusServices",value:function(e){plus.oauth.getServices(function(t){e(null,t)},function(t){e(t,null)})}}]),e}();t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){plus.nativeUI.actionSheet({cancel:"取消",buttons:[{title:"照相机",style:"destructive"},{title:"最近相片"},{title:"相册"}]},function(n){var r=n.index;if(0!==r)if(r--,0===r){var i=plus.camera.getCamera();i.captureImage(function(t){plus.io.resolveLocalFileSystemURL(t,function(t){var n=t.name,r=t.toLocalURL();e&&e(null,[r],[n])},function(t){e&&e(t.message)})},function(t){e&&e(t.message)},{filename:"_doc/camera/",index:1})}else{var u=!1;2===r&&(u=!0),plus.gallery.pick(function(n){if(t){for(var r=[],i=0;i<n.files.length;i++)r.push(n.files[i]);n=r}e&&e(null,n)},function(t){e&&e(t.message)},{filter:"image",multiple:!!t,system:u,maximum:t,onmaxed:function(){plus.nativeUI.toast("您最多能选择"+t+"张")}})}})};t.default=n},function(module,exports){"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cache=function(){var CacheBase=function(){function CacheBase(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"__this_is_cache_key_",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.plus,r=void 0!==n&&n;_classCallCheck(this,CacheBase),this.key=e,this.plus=r}return _createClass(CacheBase,[{key:"storage",value:function(e,t){return t?this.plus?plus.storage.setItem(e,t):window.localStorage.setItem(e,t):this.plus?plus.storage.getItem(e):window.localStorage.getItem(e)}},{key:"isEmpty",value:function(){return!this.storage(this.key)}},{key:"clear",value:function(){return this.storage(this,key,"")}},{key:"get",value:function(e){var t=this.storage(this.key)||'{"type":"_null"}';return t=this._getAfter(t),e&&e(t),t}},{key:"set",value:function(e,t){var n=this._setBefore(e);return this.storage(this.key,n),t&&t(n),n}},{key:"_getAfter",value:function _getAfter(op){op=JSON.parse(op);var cs={_string:function(e){return e},_number:function(e){return+e},_boolean:function(e){return"true"===e},_undefined:function(e){},_object:function(e){return JSON.parse(e)},_function:function _function(val){return eval("("+val+")")},_array:function(e){return JSON.parse(e)},_date:function(e){return new Date(e)},_regexp:function(e){return new RegExp(e)},_null:function(e){return null}};return cs[op.type](op.value)}},{key:"_setBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="_"+Object.prototype.toString.call(e).slice(8,-1).toLowerCase();return function(e,n){var r={_string:function(e){return e},_number:function(e){return e},_boolean:function(e){return e?"true":"false"},_undefined:function(e){return"undefined"},_object:function(e){return JSON.stringify(e)},_function:function(e){return e.toString()},_array:function(e){return JSON.stringify(e)},_date:function(e){return e.getTime()},_regexp:function(e){return e.toString().replace(/[(^\/)|($\/)]/g,"")},_null:function(e){return"null"}};return JSON.stringify({type:t,value:r[n](e)})}(e,t)}}]),CacheBase}(),Cache=function(e){function t(){var e;_classCallCheck(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return _possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)))}return _inherits(t,e),_createClass(t,[{key:"plus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.plus=e}},{key:"push",value:function(){var e=this.data;return!!Array.isArray(e)&&(e.push.apply(e,arguments),void(this.data=e))}},{key:"data",get:function(){return this.get()},set:function(e){return this.set(e)}}]),t}(CacheBase);return Cache}();exports.default=Cache},function(e,t){"use strict";var n=function(e){var t=/complete|loaded|interactive/;return t.test(document.readyState)?setTimeout(e,0):document.addEventListener("DOMContentLoaded",e),this},r=function(e){window.plus?setTimeout(e,0):document.addEventListener("plusready",e,!1)};e.exports={ready:n,plusReady:r}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){var e=void 0;return function(t){return t&&(e=t),e}}(),u={wxhy:"WXSceneSession",wxpyq:"WXSceneTimeline",qq:"qq",sinaweibo:"sinaweibo"},a=function(){function e(t,r,i,u){n(this,e),this.config={type:t,fn:r,op:i,context:u},this._initCallback(),this.start()}return r(e,[{key:"_initCallback",value:function(){this.ShareCallBack=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.config.fn.apply(this.config.context,t)}}},{key:"start",value:function(){var e=this;this.getService(this.config.type,function(t){e.sendShare(t,function(){e.ShareCallBack(null,t)})})}},{key:"sendShare",value:function(e,t){var n=this,r=this._getShareInfo(e);e.send(r,function(){t()},function(t){n.ShareCallBack(t,e)})}},{key:"_getShareInfo",value:function(e){var t={extra:{scene:u[this.config.type]},href:this.config.op.href,title:this.config.op.title,content:this.config.op.content,pictures:[this.config.op.img],thumbs:[this.config.op.img]};return t.href||(delete t.title,delete t.content),t}},{key:"_getAuth",value:function(e,t){var n=this;e.authenticated?t():e.authorize(function(){t()},function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.ShareCallBack.apply(null,t)})}},{key:"_getService",value:function(e,t){~e.toString().indexOf("wx")&&(e="weixin");var n=i();for(var r in n)if(console.log(JSON.stringify(n[r])),e===n[r].id)return t&&t(n[r]),n[r]}},{key:"getService",value:function(e,t){var n=this;return i()?this._getService(e,t):void this._getHtml5PlusServices(function(r){i(r),n._getService(e,t)})}},{key:"_getHtml5PlusServices",value:function(e){var t=this;plus.share.getServices(function(t){e(t)},function(e){t.ShareCallBack(e,null)})}}]),e}();e.exports=a}]);